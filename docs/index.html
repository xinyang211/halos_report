<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Halos Dataset</title>
<script>
    var halos;
    const fields = ["particle_mass (M_sun)", "particle_position_x (unitary)", "particle_position_y (unitary)", "particle_position_z (unitary)", "particle_velocity_magnitude (km/s)", "virial_radius (kpc)"];
    
    document.addEventListener("DOMContentLoaded", () => {
        
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                            halos = JSON.parse(this.responseText);
                            var options = document.getElementById("halo_id");
                            halos.slice(0, 100).forEach((v, i) => {
                                    var newOption = document.createElement("option");
                                    newOption.text = `Halo ${i}`;
                                    newOption.value = i;
                                    options.appendChild(newOption);
                                });
                        }
                };
            xmlhttp.open("GET", "halos.json", true);
            xmlhttp.send();
        
            document.getElementById("halo_id").addEventListener("change", (event) => {
                    document.getElementById("halo_chosen").textContent = `You chose halo ${event.target.value}`;
                    var halo = halos[event.target.value]
                    fields.forEach( fieldName => {
                            document.getElementById(fieldName).textContent = fieldName+": "+halo[fieldName].toFixed(4).toString();
                        });
                    num = ("" + event.target.value).padStart(4, "0");
                    document.getElementById("projection").src = `halo_${num}/projection_${num}.png`;
                });
        });
</script>
</head>
<body>
    <span style="color:red" id="halo_chosen"></span><br/>
    <span id="particle_mass (M_sun)"></span><br/>
    <span id="particle_position_x (unitary)"></span><br/>
    <span id="particle_position_y (unitary)"></span><br/>
    <span id="particle_position_z (unitary)"></span><br/>
    <span id="particle_velocity_magnitude (km/s)"></span><br/>
    <span id="virial_radius (kpc)"></span><br/>
    <img src="" id="projection">
    <select name="halo_id" id="halo_id">
    </select>
</body>
</html>